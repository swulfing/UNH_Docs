###Michael Thompson : WORKING
for (i in 1:length(salaryMF$TAIA2)){
if(is.na(salaryMF$ANARANY[i]) == TRUE & is.na(salaryMF$TAIA[i]) == TRUE){
salaryMF <-  salaryMF %>%
fill(TAIA2, .direction = "down") %>%
fill(ANARANY2, .direction = "down") %>%
fill(SEXE2, .direction = "down")
}else{}
}
write.csv(salaryMF,"\cleanData.csv")
library(dplyr)
colnames(salaryMF)
salaryMF %>% salaryMF %>%
select(c("Town.of.Collection", #TOWN
"Date...day", #DAY
"Date...Month", #MONTH
"Date...Year", #YEAR
"Full.DATE", #DATE
"ANARANY2", #FISHER_NAME
"KARAZANY", #CATCH_TYPE
"ISANY3", #NO_CAUGHT
"KILO3", #TOT_WT
"Average.Size..kilo.individual.", #AVG_WT
"VIDINY.AR", #PRICE_AR
"USD.Price..1.USD..2167.75.ariary.", #PRICE_USD
"Olo.firy", #NO_FISHERS
"TAIA2", #REGION
"SEXE2", #SEX_FISHER
"FITAOVANA2", #FISHING_GEAR
"Total.time" #FISHING_TIME
)) %>%
rename(Town.of.Collection = "TOWN",
Date...day = "DAY",
Date...Month = "MONTH",
Date...Year = "YEAR",
Full.DATE = 'DATE',
ANARANY2 = 'FISHER_NAME',
KARAZANY = 'CATCH_TYPE',
ISANY3 = 'NO_CAUGHT',
KILO3 = 'TOT_WT',
Average.Size..kilo.individual. = 'AVG_WT',
VIDINY.AR = 'PRICE_AR',
USD.Price..1.USD..2167.75.ariary. = 'PRICE_USD',
Olo.firY = 'NO_FISHERS',
TAIA2 = 'REGION',
SEXE2 = 'SEX_FISHER',
FITAOVANA2 = 'FISHING_GEAR',
Total.time = 'FISHING_TIME'
)
col_select <- salaryMF %>%
select(c("Town.of.Collection", #TOWN
"Date...day", #DAY
"Date...Month", #MONTH
"Date...Year", #YEAR
"Full.DATE", #DATE
"ANARANY2", #FISHER_NAME
"KARAZANY", #CATCH_TYPE
"ISANY3", #NO_CAUGHT
"KILO3", #TOT_WT
"Average.Size..kilo.individual.", #AVG_WT
"VIDINY.AR", #PRICE_AR
"USD.Price..1.USD..2167.75.ariary.", #PRICE_USD
"Olo.firy", #NO_FISHERS
"TAIA2", #REGION
"SEXE2", #SEX_FISHER
"FITAOVANA2", #FISHING_GEAR
"Total.time" #FISHING_TIME
)) %>%
rename(Town.of.Collection = "TOWN",
Date...day = "DAY",
Date...Month = "MONTH",
Date...Year = "YEAR",
Full.DATE = 'DATE',
ANARANY2 = 'FISHER_NAME',
KARAZANY = 'CATCH_TYPE',
ISANY3 = 'NO_CAUGHT',
KILO3 = 'TOT_WT',
Average.Size..kilo.individual. = 'AVG_WT',
VIDINY.AR = 'PRICE_AR',
USD.Price..1.USD..2167.75.ariary. = 'PRICE_USD',
Olo.firY = 'NO_FISHERS',
TAIA2 = 'REGION',
SEXE2 = 'SEX_FISHER',
FITAOVANA2 = 'FISHING_GEAR',
Total.time = 'FISHING_TIME'
)
col_select <- salaryMF %>%
select(c("Town.of.Collection", #TOWN
"Date...day", #DAY
"Date...Month", #MONTH
"Date...Year", #YEAR
"Full.DATE", #DATE
"ANARANY2", #FISHER_NAME
"KARAZANY", #CATCH_TYPE
"ISANY3", #NO_CAUGHT
"KILO3", #TOT_WT
"Average.Size..kilo.individual.", #AVG_WT
"VIDINY.AR", #PRICE_AR
"USD.Price..1.USD..2167.75.ariary.", #PRICE_USD
"Olo.firy", #NO_FISHERS
"TAIA2", #REGION
"SEXE2", #SEX_FISHER
"FITAOVANA2", #FISHING_GEAR
"Total.time" #FISHING_TIME
)) %>%
rename(Town.of.Collection = TOWN,
Date...day = "DAY",
Date...Month = "MONTH",
Date...Year = "YEAR",
Full.DATE = 'DATE',
ANARANY2 = 'FISHER_NAME',
KARAZANY = 'CATCH_TYPE',
ISANY3 = 'NO_CAUGHT',
KILO3 = 'TOT_WT',
Average.Size..kilo.individual. = 'AVG_WT',
VIDINY.AR = 'PRICE_AR',
USD.Price..1.USD..2167.75.ariary. = 'PRICE_USD',
Olo.firY = 'NO_FISHERS',
TAIA2 = 'REGION',
SEXE2 = 'SEX_FISHER',
FITAOVANA2 = 'FISHING_GEAR',
Total.time = 'FISHING_TIME'
)
rlang::last_error()
col_select <- salaryMF %>%
select(c("Town.of.Collection", #TOWN
"Date...day", #DAY
"Date...Month", #MONTH
"Date...Year", #YEAR
"Full.DATE", #DATE
"ANARANY2", #FISHER_NAME
"KARAZANY", #CATCH_TYPE
"ISANY3", #NO_CAUGHT
"KILO3", #TOT_WT
"Average.Size..kilo.individual.", #AVG_WT
"VIDINY.AR", #PRICE_AR
"USD.Price..1.USD..2167.75.ariary.", #PRICE_USD
"Olo.firy", #NO_FISHERS
"TAIA2", #REGION
"SEXE2", #SEX_FISHER
"FITAOVANA2", #FISHING_GEAR
"Total.time" #FISHING_TIME
))
write.csv(col_select,"\cleanData.csv")
write.csv(col_select,"\cleanData.csv")
write.csv(col_select,"cleanData.csv")
unique(col_select$Total.time)
col_select <- salaryMF %>%
select(c("Town.of.Collection", #TOWN
"Date...day", #DAY
"Date...Month", #MONTH
"Date...Year", #YEAR
"Full.DATE", #DATE
"ANARANY2", #FISHER_NAME
"KARAZANY", #CATCH_TYPE
"ISANY3", #NO_CAUGHT
"KILO3", #TOT_WT
"Average.Size..kilo.individual.", #AVG_WT
"VIDINY.AR", #PRICE_AR
"USD.Price..1.USD..2167.75.ariary.", #PRICE_USD
"Olo.firy", #NO_FISHERS
"TAIA2", #REGION
"SEXE2", #SEX_FISHER
"FITAOVANA2", #FISHING_GEAR
"Total.time" #FISHING_TIME
)) %>%
rename(Town.of.Collection = TOWN)#,
col_select <- salaryMF %>%
select(c("Town.of.Collection", #TOWN
"Date...day", #DAY
"Date...Month", #MONTH
"Date...Year", #YEAR
"Full.DATE", #DATE
"ANARANY2", #FISHER_NAME
"KARAZANY", #CATCH_TYPE
"ISANY3", #NO_CAUGHT
"KILO3", #TOT_WT
"Average.Size..kilo.individual.", #AVG_WT
"VIDINY.AR", #PRICE_AR
"USD.Price..1.USD..2167.75.ariary.", #PRICE_USD
"Olo.firy", #NO_FISHERS
"TAIA2", #REGION
"SEXE2", #SEX_FISHER
"FITAOVANA2", #FISHING_GEAR
"Total.time" #FISHING_TIME
)) %>%
rename(TOWN = Town.of.Collection) # = TOWN,
col_select
col_select <- salaryMF %>%
select(c("Town.of.Collection", #TOWN
"Date...day", #DAY
"Date...Month", #MONTH
"Date...Year", #YEAR
"Full.DATE", #DATE
"ANARANY2", #FISHER_NAME
"SEXE2", #SEX_FISHER
"KARAZANY", #CATCH_TYPE
"ISANY3", #NO_CAUGHT
"KILO3", #TOT_WT
"Average.Size..kilo.individual.", #AVG_WT
"VIDINY.AR", #PRICE_AR
"USD.Price..1.USD..2167.75.ariary.", #PRICE_USD
"Olo.firy", #NO_FISHERS
"TAIA2", #REGION
"FITAOVANA2", #FISHING_GEAR
"Total.time" #FISHING_TIME
)) %>%
rename(TOWN = Town.of.Collection,
DAY = Date...day,
MONTH = Date...Month,
YEAR = Date...Year,
DATE = Full.DATE,
FISHER_NAME = ANARANY2,
CATCH_TYPE = KARAZANY,
NO_CAUGHT = ISANY3,
TOT+WT = KILO3,
AVG_WT = Average.Size..kilo.individual.,
PRICE_AR = VIDINY.AR,
PRICE_USD = USD.Price..1.USD..2167.75.ariary.,
NO_FISHERS = Olo.firY,
REGION = TAIA2,
FISHER_SEX = SEXE2,
FISHING_GEAR = FITAOVANA2,
FISHING_TIME = Total.time
)
col_select <- salaryMF %>%
select(c("Town.of.Collection", #TOWN
"Date...day", #DAY
"Date...Month", #MONTH
"Date...Year", #YEAR
"Full.DATE", #DATE
"ANARANY2", #FISHER_NAME
"SEXE2", #SEX_FISHER
"KARAZANY", #CATCH_TYPE
"ISANY3", #NO_CAUGHT
"KILO3", #TOT_WT
"Average.Size..kilo.individual.", #AVG_WT
"VIDINY.AR", #PRICE_AR
"USD.Price..1.USD..2167.75.ariary.", #PRICE_USD
"Olo.firy", #NO_FISHERS
"TAIA2", #REGION
"FITAOVANA2", #FISHING_GEAR
"Total.time" #FISHING_TIME
)) %>%
rename(TOWN = Town.of.Collection,
DAY = Date...day,
MONTH = Date...Month,
YEAR = Date...Year,
DATE = Full.DATE,
FISHER_NAME = ANARANY2,
CATCH_TYPE = KARAZANY,
NO_CAUGHT = ISANY3,
TOT_WT = KILO3,
AVG_WT = Average.Size..kilo.individual.,
PRICE_AR = VIDINY.AR,
PRICE_USD = USD.Price..1.USD..2167.75.ariary.,
NO_FISHERS = Olo.firy,
REGION = TAIA2,
FISHER_SEX = SEXE2,
FISHING_GEAR = FITAOVANA2,
FISHING_TIME = Total.time
)
write.csv(col_select,"cleanData.csv")
unique(col_select$TOWN)
cleanData <- col_select %>%
mutate(TOWN = replace(TOWN, TOWN == "Salary ", "Salary"))
write.csv(cleanData,"cleanData.csv")
UNIQUE(cleanData$TOWN)
unique(cleanData$TOWN)
unique(col_select$TOWN)
unique(col_select$DAY)
unique(col_select$MONTH)
cleanData <- col_select %>%
mutate(TOWN = replace(TOWN, TOWN == "Salary ", "Salary"),
MONTH = replace(MONTH, MONTH = "January", "January")
)
cleanData <- col_select %>%
mutate(TOWN = replace(TOWN, TOWN == "Salary ", "Salary"),
MONTH = replace(MONTH, MONTH = "January ", "January")
)
col_select <- salaryMF %>%
select(c("Town.of.Collection", #TOWN
"Date...day", #DAY
"Date...Month", #MONTH
"Date...Year", #YEAR
"Full.DATE", #DATE
"ANARANY2", #FISHER_NAME
"SEXE2", #SEX_FISHER
"KARAZANY", #CATCH_TYPE
"ISANY3", #NO_CAUGHT
"KILO3", #TOT_WT
"Average.Size..kilo.individual.", #AVG_WT
"VIDINY.AR", #PRICE_AR
"USD.Price..1.USD..2167.75.ariary.", #PRICE_USD
"Olo.firy", #NO_FISHERS
"TAIA2", #REGION
"FITAOVANA2", #FISHING_GEAR
"Total.time" #FISHING_TIME
)) %>%
rename(TOWN = Town.of.Collection,
DAY = Date...day,
MONTH = Date...Month,
YEAR = Date...Year,
DATE = Full.DATE,
FISHER_NAME = ANARANY2,
CATCH_TYPE = KARAZANY,
NO_CAUGHT = ISANY3,
TOT_WT = KILO3,
AVG_WT = Average.Size..kilo.individual.,
PRICE_AR = VIDINY.AR,
PRICE_USD = USD.Price..1.USD..2167.75.ariary.,
NO_FISHERS = Olo.firy,
REGION = TAIA2,
FISHER_SEX = SEXE2,
FISHING_GEAR = FITAOVANA2,
FISHING_TIME = Total.time
)
cleanData <- col_select %>%
mutate(TOWN = replace(TOWN, TOWN == "Salary ", "Salary"),
MONTH = replace(MONTH, MONTH = "January ", "January")
)
cleanData <- col_select %>%
mutate(TOWN = replace(TOWN, TOWN == "Salary ", "Salary"),
MONTH = replace(MONTH, MONTH == "January ", "January")
)
cleanData <- col_select %>%
mutate(TOWN = replace(TOWN, TOWN == "Salary ", "Salary"),
MONTH = replace(MONTH, MONTH == "January ", "January" |
MONTH == "February ", "February")
)
cleanData <- col_select %>%
mutate(TOWN = replace(TOWN, TOWN == "Salary ", "Salary"),
MONTH = replace(MONTH, (MONTH == "January ", "January" |
MONTH == "February ", "February"))
)
cleanData <- col_select %>%
mutate(TOWN = recode(TOWN, 'Salary ' = 'Salary')
replace(TOWN, TOWN == "Salary ", "Salary"),
MONTH = replace(MONTH, MONTH == "January ", "January" |
MONTH == "February ", "February")
)
col_select <- salaryMF %>%
select(c("Town.of.Collection", #TOWN
"Date...day", #DAY
"Date...Month", #MONTH
"Date...Year", #YEAR
"Full.DATE", #DATE
"ANARANY2", #FISHER_NAME
"SEXE2", #SEX_FISHER
"KARAZANY", #CATCH_TYPE
"ISANY3", #NO_CAUGHT
"KILO3", #TOT_WT
"Average.Size..kilo.individual.", #AVG_WT
"VIDINY.AR", #PRICE_AR
"USD.Price..1.USD..2167.75.ariary.", #PRICE_USD
"Olo.firy", #NO_FISHERS
"TAIA2", #REGION
"FITAOVANA2", #FISHING_GEAR
"Total.time" #FISHING_TIME
)) %>%
rename(TOWN = Town.of.Collection,
DAY = Date...day,
MONTH = Date...Month,
YEAR = Date...Year,
DATE = Full.DATE,
FISHER_NAME = ANARANY2,
CATCH_TYPE = KARAZANY,
NO_CAUGHT = ISANY3,
TOT_WT = KILO3,
AVG_WT = Average.Size..kilo.individual.,
PRICE_AR = VIDINY.AR,
PRICE_USD = USD.Price..1.USD..2167.75.ariary.,
NO_FISHERS = Olo.firy,
REGION = TAIA2,
FISHER_SEX = SEXE2,
FISHING_GEAR = FITAOVANA2,
FISHING_TIME = Total.time
)
cleanData <- col_select %>%
mutate(TOWN = recode(TOWN, 'Salary ' = 'Salary')
#   replace(TOWN, TOWN == "Salary ", "Salary"),
# MONTH = replace(MONTH, MONTH == "January ", "January" |
#                   MONTH == "February ", "February")
)
Unique(col_select$MONTH
Unique(col_select$MONTH)
Unique(col_select$MONTH)
unique(col_select$MONTH)
cleanData <- col_select %>%
mutate(TOWN = recode(TOWN, 'Salary ' = 'Salary'),
MONTH = recode(MONTH, 'January ' = 'January',
'Februrary ' = 'February',
'March ' = 'March',
'May ' = 'May',
'August ' = 'August',
'December ' = 'December'
))
unique(cleanData$MONTH)
cleanData <- col_select %>%
mutate(TOWN = recode(TOWN, 'Salary ' = 'Salary'),
MONTH = recode(MONTH, 'January ' = 'January',
'February ' = 'February',
'March ' = 'March',
'May ' = 'May',
'August ' = 'August',
'November ' = 'November',
'December ' = 'December'
))
unique(cleanData$MONTH)
cleanData <- col_select %>%
mutate(TOWN = recode(TOWN, 'Salary ' = 'Salary'),
MONTH = recode(MONTH, 'January ' = 'January',
'February ' = 'February',
'March ' = 'March',
'May ' = 'May',
'August ' = 'August',
'November ' = 'November',
'December ' = 'December',
"" = NA))
unique(cleanData$DAY)
unique(cleanData$YEAR)
unique(cleanData$DATE)
cleanData <- col_select %>%
mutate(TOWN = recode(TOWN, 'Salary ' = 'Salary'),
MONTH = recode(MONTH, 'January ' = 'January',
'February ' = 'February',
'March ' = 'March',
'May ' = 'May',
'August ' = 'August',
'November ' = 'November',
'December ' = 'December'), #has blanks "?????" "??????"
DATE = recode(DATE, "?????" = NA,
"??????" = NA),
)
cleanData <- col_select %>%
mutate(TOWN = recode(TOWN, 'Salary ' = 'Salary'),
MONTH = recode(MONTH, 'January ' = 'January',
'February ' = 'February',
'March ' = 'March',
'May ' = 'May',
'August ' = 'August',
'November ' = 'November',
'December ' = 'December'), #has blanks "?????" "??????"
DATE = recode(DATE, "?????" = "",
"??????" = ""),
)
unique(cleanData$FISHER_NAME)
unique(cleanData$FISHER_SEX)
unique(cleanData$CATCH_TYPE)
unique(cleanData$NO_CAUGHT)
knitr::opts_chunk$set(echo = TRUE)
library(R2jags)
library(tidyr)
library(dplyr)
setwd("~/UNH_Docs/NR913")
cephs <- read.csv("C:/Users/sophi/Documents/UNH_Docs/Proposal/CNH2_data/cleanData.csv")
site_data <- cephs %>%
group_by(REGION) %>%
summarise(Count = n()) %>%
filter(Count > 150)
ceph_sites <- cephs %>%
filter(REGION %in% site_data$REGION)
ceph_sites2 <- transform(ceph_sites,id=as.numeric(factor(REGION)))
ceph_model <- transform(cephs,id=as.numeric(factor(REGION)), sex_id=(as.numeric(factor(FISHER_SEX))-1))
ceph_sex <- ceph_model %>% drop_na(sex_id)
#TTEST
#CHECK IF YOU NEEDED TO TRANSFORM DATA FIRST
#SEE SESSION 14 FOR WAYS TO FURTHER THIS MODEL AND ^
#fIX P VALUE STUFF - Possible directed cycle involving D.new.sum
#Visualize Data-FIX THIS
boxplot(NO_CAUGHT ~ FISHER_SEX,
ylab = "No caught per landing",
xlab = "Site",
outline = TRUE,
notch = FALSE,
staplewex = 0.2,
boxwex = 0.4,
border = TRUE,
data = ceph_model)
sink("cephs_sexno.txt")
cat("
model {
# PRIORS
beta0 ~ dnorm(0,0.001)  # intercept
beta1 ~ dnorm(0,0.001)  # effect of M/F, IDK
# LIKELIHOOD
for(i in 1:n){
cephs[i] ~ dpois(lambda[i]) #error term built in bc lambda is both mean and var
log(lambda[i]) <- beta0 + beta1 * sex[i] # sex needs to be 0s and 1s. predicting log of lambda, not lambda
#lambda[i] <- exp(beta0 + beta1 * sex[i] ) Alternative form
} # i
} # end of model
",fill = TRUE)
sink()
win.data <- list(cephs = ceph_sex$NO_CAUGHT,
sex  = ceph_sex$sex_id,
n  = nrow(ceph_sex))
# Initial values
inits <- function()list(beta0  = rnorm(1),
beta1  = rnorm(1))
# Parameters monitored
params <- c("beta0",
"beta1")#,
# "Bayes.P",
# "D.sum",
# "D.new.sum",
# "cephs.new")
# MCMC settings
ni <- 3000; nt <- 1; nb <- 1000; nc <- 3
out_sexno <- jags(win.data, inits, params, "cephs_sexno.txt",
n.chains = nc, n.thin = nt, n.iter = ni, n.burnin = nb,
working.directory = getwd())
